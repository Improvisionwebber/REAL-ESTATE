{% extends "base.html" %}
{% block title %}Services Page{% endblock title %}
{% load static %}

{% block body %}

<div class="container text-center my-5">
    <h5 class="text-success fw-bold animate__animated animate__fadeInDown">OUR SERVICES</h5>
    <h1 class="fw-bold display-5 mb-3 animate__animated animate__fadeInUp">Creating Sustainable Spaces</h1>
    <p class="text-muted animate__animated animate__fadeInUp animate__delay-1s">
        Transforming landscapes into eco-conscious havens with sustainable designs <br>
        and green building practices
    </p>
</div>

<div class="container">
    <div class="row g-4">
        {% for post in posts %}
        <div class="col-sm-6 col-lg-4 d-flex">
            <div class="card service-card shadow-lg rounded-4 overflow-hidden w-100 animate-on-scroll">
                {% if post.image_url %}
                    <div class="img-container">
                        <img src="{{ post.image_url }}" class="card-img-top post-img" alt="Post Image">
                    </div>
                {% else %}
                    <div class="img-container d-flex align-items-center justify-content-center bg-light text-muted">
                        No Image Available
                    </div>
                {% endif %}
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title fw-bold">
                        {{ post.title }}
                        <a href="{% url 'single' post.pk %}" class="stretched-link text-success text-decoration-none">â†’</a>
                    </h5>
                    <p class="card-text text-muted">{{ post.body|truncatechars:80 }}</p>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>


<style>
/* Container and text */
.container h1 {
    font-weight: 700;
    color: #212529;
}
.container h5 {
    letter-spacing: 2px;
}

/* Service Card Styling */
.service-card {
    transition: transform 0.4s ease, box-shadow 0.4s ease;
    cursor: pointer;
}
.service-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 15px 40px rgba(0,0,0,0.1);
}

/* Image Styling - force same size */
.img-container {
    width: 100%;
    height: 220px; /* fixed uniform height */
    overflow: hidden;
}
.img-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform .5s ease;
}
.img-container img:hover {
    transform: scale(1.1);
}

/* Responsive tweaks */
@media (max-width: 767px) {
    .img-container {
        height: 180px;
    }
    .container h1 {
        font-size: 1.75rem;
    }
}

/* Scroll reveal animation */
.animate-on-scroll {
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.8s ease-out;
}
.animate-on-scroll.visible {
    opacity: 1;
    transform: translateY(0);
}
</style>

<!-- Animate.css for entrance effects -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

<!-- Scroll animation script -->
<script>
document.addEventListener("DOMContentLoaded", function() {
    const scrollElements = document.querySelectorAll(".animate-on-scroll");

    const elementInView = (el, offset = 100) => {
        const elementTop = el.getBoundingClientRect().top;
        return (
            elementTop <= (window.innerHeight || document.documentElement.clientHeight) - offset
        );
    };

    const displayScrollElement = (element) => {
        element.classList.add("visible");
    };

    const handleScrollAnimation = () => {
        scrollElements.forEach((el) => {
            if (elementInView(el, 100)) {
                displayScrollElement(el);
            }
        })
    };

    window.addEventListener("scroll", () => { 
        handleScrollAnimation();
    });

    handleScrollAnimation(); // run on load
});
</script>

{% endblock body %}
